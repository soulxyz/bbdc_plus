# BBDC Plus - 背单词神器

用 OCR 实时识别屏幕上的英文单词，自动显示词根、词缀和速记方法。简单来说，就是你一边背单词，它一边在旁边帮你查资料。
目前主要用于搭配不背单词使用。

## 核心功能

- **实时识别**：自动识别屏幕上的英文单词，不用手动输入
- **词根分析**：显示单词的拆分和词根含义，帮你理解记忆
- **悬浮窗口**：透明卡片样式，不遮挡学习内容
- **智能匹配**：OCR 识别错了也不怕，会自动找相似的词
- **全局快捷键**：随时控制，不影响你背单词的节奏

## 快速开始

### 安装依赖

```bash
pip install -r requirements.txt
```

就这么简单，不需要安装 Tesseract 什么的，RapidOCR 会自动下载模型。

### 运行程序

```bash
python main.py
```

**注意**：需要**管理员权限**才能用全局快捷键（F2/F3/F4这些）。

### 使用步骤

1. **启动程序**，会弹出屏幕选择界面
2. **拖拽鼠标**框选要识别的区域（通常是背单词软件显示单词的地方）
3. **开始背单词**，悬浮窗会自动显示相关信息

就这么简单。

## 快捷键说明

| 按键 | 功能 |
|------|------|
| **F2** | 重新选择识别区域 |
| **F3** | 显示/隐藏悬浮窗 |
| **F4** | 暂停/继续识别 |
| **ESC** | 退出程序 |

## 悬浮窗显示什么？

当识别到单词时，悬浮窗会显示：

- **单词和音标**
- **词根拆分**（如果有的话）
- **释义**
- **真题意群**（考试常用搭配）
- **相关词根**（自动匹配）

比如 `abandon` 会显示：
- 词根拆分：`a+ban+don` = `×+禁止+给出`
- 释义：`v.放弃；抛弃`
- 相关词根：`△ ban = 禁止`、`△ don = 给出`

## 配置调整

如果觉得哪里不合适，可以改 `config.py`：

- **识别速度**：`OCR_INTERVAL = 0.5` 改成更小的值会识别得更频繁（但更耗 CPU）
- **窗口透明度**：`WINDOW_ALPHA = 0.95` 改成 0.8 会更透明
- **相似度阈值**：`FUZZY_MATCH_THRESHOLD = 0.9` 越高越不容易误判
- **字体大小**：`FONT_SIZE_*` 系列参数

其他参数看代码注释就行，都很直观。

## 常见问题

**Q: 识别不到单词？**  
A: 选区域时尽量只框单词本身，不要包含太多其他东西。字体太小也可能识别不到。

**Q: 识别错了怎么办？**  
A: 程序会自动用模糊匹配找相似的词。如果词库没有（会显示"词库未收录"），那只能手动查了。

**Q: 快捷键没反应？**  
A: 需要用管理员权限运行。右键 `python main.py` 选"以管理员身份运行"。

**Q: 悬浮窗挡住了内容？**  
A: 拖动标题栏可以移动，按 F3 可以隐藏，或者调低透明度。

**Q: 为什么启动这么慢？**  
A: 首次启动要加载 OCR 模型（约 10MB），之后会快很多。程序会在你选择区域时后台加载，基本不影响使用。

## 技术细节

- **OCR 引擎**：RapidOCR（基于深度学习的 ONNX 模型）
- **数据源**：词汇新修版讲义（约 2500 个单词，700 个词根）
- **性能优化**：图像去重、灰度+二值化预处理、智能跳过未变化画面

## 文件说明

```
bbdc_plus/
├── main.py              # 主程序
├── database.py           # 数据库解析和查询
├── ocr_engine.py         # OCR 识别引擎
├── floating_window.py    # 悬浮窗界面
├── screen_selector.py    # 屏幕区域选择
├── dpi_utils.py          # 高DPI支持
├── config.py             # 配置文件
└── 词汇新修版讲义_files/ # 数据文件（HTML格式）
    └── content.htm       # 主要数据源
```

测试文件 `test_ocr_region.py` 可以用来单独测试 OCR 识别效果。

## 适用场景

配合任何背单词软件使用：
- 墨墨背单词
- 不背单词
- 扇贝单词
- Anki
- 等等...



## 系统要求

- Windows 10/11
- Python 3.8+
- 建议 2GB 以上内存
- 需要管理员权限（用于全局快捷键）

---

**Enjoy learning! 🎓**
